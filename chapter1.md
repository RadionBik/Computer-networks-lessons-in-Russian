# Практическая работа №3. Подключение к устройствам

Цель: овладеть навыками работы в PacketTracer и выполнить начальную конфигурацию коммутатора для режима удалённой работы.

Конфигурация сетевых устройств Cisco должна выполняться в CLI \(Command Line Interface – командная строка\). При физическом подключении к оборудованию, доступ к CLI можно получить через сеанс консоли, также известный как линия CTY. Консоль использует низкоскоростное последовательное соединение для непосредственного подключения компьютера или терминала к консоли. Консольный порт – это порт управления, который обеспечивает внеполосный доступ к маршрутизатору. Консольный порт доступен, даже если на устройстве не настроены сетевые службы.

Примерами использования консоли являются:

* Начальная конфигурация сетевого устройства

* Процедуры аварийного восстановления и устранение неполадок, когда удаленный доступ невозможен

* Процедуры восстановления пароля

Другой способ установить сеанс CLI удаленно – через телефонное коммутируемое соединение, используя модем, подключенный к порту AUX маршрутизатора. Подобно консольному соединению, этот метод не требует настройки или доступности каких-либо сетевых сервисов на устройстве. Порт AUX также можно использовать локально, например, консольный порт, с прямым подключением к компьютеру, на котором запущена программа эмуляции терминала. Как правило, порт AUX используется локально вместо консольного порта, когда возникают проблемы с использованием консольного порта, например, когда параметры подключения к консоли неизвестны.

Приступая в работе, соберите схему, как показано на Рисунке ниже. 

![](/assets/pr3topo.png)

В Packet Tracer для доступа к CLI кликаем по устройству и открываем вкладку CLI. Вид префикса пригласительной строки обозначает текущий режим конфигурации – User EXEC Mode.

`Switch>`

В данном случае возможно использование только базовых возможностей, таких как просмотр некоторых свойств конфигурации, выполнение команды ping и т.д. Вход в привилегированный режим \(Privileged Mode\) осуществляется следующим образом:

`Switch>enable`

Привилегированный режим \(Switch\#\) позволяет выполнять более широкий диапазон команд \(детальный мониторинг, дебагинг, манипуляции с файловой системой\).

Следующий режим доступа – Global Configuration Mode, которые позволяет осуществлять детальную настройку оборудования. Вход в режим осуществляется так:

`Switch#configure terminal`

> Активно используйте автодополнение в консоли клавишей «Tab» и вводом «?».

В целях безопасности, необходимо задать пароль на доступ к привел. режиму:

Switch\(config\)\# enable secretpassword1% cisco

Необходимо также обезопасить консольный интерфейс:

Switch\(config\)\# line console 0

Switch\(config-line\)\# passwordpassword2 %classCon

Switch\(config-line\)\# login %затребовать ввод пароля при входе

Switch\(config-line\)\# exit

% – означает комментарий, символы после этого знака вводить в консоль не нужно :\)

Необходимо настроить Switch Virtual Interface \(SWI\) для возможности удалённого контроля:

Switch\(config\)\# interface vlan 1

Switch\(config-if\)\# ip address 192.168.10.2 255.255.255.0

Switch\(config-if\)\# no shutdown %ВРУЧНУЮактивируеминтерфейс

Switch\(config-if\)\# exit

Далее ставим пароль на виртуальные интерфейсы, через которые можно осуществлять удалённую конфигурацию оборудования по Telnet:

Test\(config\)\# line vty 0 15 %начинаем конфигурацию виртуальных линий \(опция – 0 4\)

Test\(config-line\)\# passwordpassword3 %classVty

Test\(config-line\)\# login %чтобы при удалённом подключении спрашивало пароль

На данном этапе нам доступен вариант подключения к оборудованию, проверить это можно так:

C:\&gt;telnet192.168.10.2

Для настройки SSH \(в отличие от Telnet здесь выполняется полное шифрование аутентификационных и пользовательских данных\) дополнительно выполняются следующие команды:

Switch\(config\)\#hostname Test % прежде необходимо задать имя устройству

Test\(config\)\#ip domain-name kaiLaba % ...иегоip-домен

Test\(config\)\#crypto key generate rsa %генерация случайного ключа для шифрования соединения \(длина должна быть &gt;=1024\)

Test\(config\)\# line vty 0 15 %начинаем конфигурацию виртуальных линий \(опция – 0 4\)

Test\(config-line\)\# passwordpassword3 %classVty

Test\(config-line\)\# login %чтобы при удалённом подключении спрашивало пароль

Test\(config-line\)\#transport input ssh %показываем, что будет использован SSH протокол

Test\(config-line\)\# exit

После этого, попробовать выполнить подключение ПК к свитчу по SSH:

C:\&gt;ssh-ladmin192.168.10.2

Обратите внимание, подключение по Telnet нам более не доступно, т.к. был настроен более надежный протокол SSH.

В целях безопасности, стоит зашифровать пароли в конфигурационных файлах, т.к. хранения в открытом виде может привести к их компрометации:

Test\(config\)\# service password-encryption

Сохраняемтекущуюконфигурацию\(2способа\):

Test\# copy running-config startup-config

Test\# write memory

Также необходимо вручную присвоить IP-адреса из подсети коммутатора \(точнее его SVI\) компьютерам. Проверить можно командойping, чтобы убедиться в доступности ПК.

Затем вывести в консоль ПК текущую конфигурацию свитча:

Switch\# show running-config

